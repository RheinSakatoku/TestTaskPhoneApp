# Результаты тестирования:

### Протестированная функция — `del`

- **Ожидаемое поведение:**  
  Происходит удаление пользователя. Вписывается ID `0`, после чего программа автоматически удалит пользователя с ID `0`.

- **Реальное поведение:**  
  Пользователь **не удаляется**.

- **Причина:**  
  Ошибка в логике на **57 строчке** — `Приложение 1`.

- **Как исправить:**  
  Избавиться от ненужного сравнения — `Приложение 1`.

---

### Протестированная функция — `add` (пустые значения)

- **Ожидаемое поведение:**  
  При попытке добавить нового пользователя с пустыми полями (фамилия, имя, телефон) программа должна выдать **ошибку**, и пользователь не должен добавляться.

- **Реальное поведение:**  
  Программа сообщает, что пользователь добавлен, хотя поля были пустыми.

- **Причина:**  
  В коде плагина не производится проверка вводимых значений.

- **Как исправить:**  
  Добавить проверку на пустые поля `Name` и `Phone`. См. `Приложение 2`.

---

### Протестированная функция — `add` (нормальные данные)

- **Ожидаемое поведение:**  
  При вводе корректных данных (ФИО, телефон) пользователь должен добавиться и отобразиться в `list`.

- **Реальное поведение:**  
  Программа сообщает, что пользователь добавлен, но при `list` он **не отображается**.

- **Причина:**  
  В коде плагина нет логики, сохраняющей пользователя в список.

- **Как исправить:**  
  Добавить в коллекцию `employeesList.Add(newEmployee);`. См. `Приложение 3`.

---

### Протестированная функция — `list`

- **Ожидаемое поведение:**  
  Вывод ID (index), имени и телефона каждого пользователя.

- **Реальное поведение:**  
  У некоторых пользователей телефон отображается как прочерк `-`.

- **Причина:**  
  Телефон был сохранён только во внутренний `_phones`, но не отображён через публичное свойство.

- **Как исправить:**  
  Восстановить `AddPhone()` при десериализации. См. `Приложение 4`.

---

Приложение 1:
57 -
```cs
if(indexToDelete > 0 && indexToDelete < employeesList.Count()) 
```
Необходимо заменить на
```cs
 if(indexToDelete < employeesList.Count())
```

Приложение 2:
```cs
            if (phone == "" || name == "")
            {
                logger.Error("Error! Empty fields!");
            }
            else
            {
                Console.WriteLine($"{name} added to employees");
            }
```

Приложение 3:
```cs
                var newEmployee = new EmployeesDTO
                {
                    Name = name
                };
                newEmployee.AddPhone(phone);
                employeesList.Add(newEmployee);
                Console.WriteLine($"{name} added to employees");
```

Приложение 4:
Добавил сеттер в EmployeesDTO
```cs
            set { _phoneFromJson = value; }
```

Добавил реализацию заполнения в LoaderPlugin
```cs
            foreach (var emp in employeesList)
            {
                if (!string.IsNullOrWhiteSpace(emp.Phone) && emp.Phone != "-")
                {
                    emp.AddPhone(emp.Phone);
                }
            }
```

---

# Мой плагин называется ApiUserLoaderPlugin.
Я загрузил его вместе со всем проектом, так как по мере тестирования вносил правки в проект, соответственно, на мой взгляд, целесообразно было бы загрузить готовый проект целиком. 

Мой плагин устанавливает безопасный протокол связи, выводит сообщение в консоль, создаёт HTTO-запрос к API, парсит ответ, преобразует в нужный формат, объединяет пользователей с уже существующими, после чего возвращает обновлённый список.

---

Полагаю, что вы и так знаете, как со мной можно связаться, но на всякий случай оставлю свои контакты: https://rheinsakatoku.github.io